"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
}); // Savepoints can be used to handle errors within a transaction:
// https://www.enterprisedb.com/postgres-tutorials/how-work-postgresql-transactions

async function createSavepoint(client, savepointName) {
  await client.query(`SAVEPOINT ${savepointName}`);
}

exports.createSavepoint = createSavepoint;

async function rollbackSavepoint(client, savepointName) {
  await client.query(`ROLLBACK TO SAVEPOINT ${savepointName}`);
}

exports.rollbackSavepoint = rollbackSavepoint;

async function commitSavepoint(client, savepointName) {
  await client.query(`RELEASE SAVEPOINT ${savepointName}`);
}

exports.commitSavepoint = commitSavepoint;